---
module: dcnm_image_policy
short_description: Image policy management for Nexus Dashboard Fabric Controller
version_added: "3.5.0"
description:
    - Create, delete, modify image policies.
author: Allen Robel (@quantumonion)
options:
    state:
        description:
            - The state of the feature or object after module completion
        type: str
        choices:
            - deleted
            - merged
            - overridden
            - query
            - replaced
        default: merged

    config:
        description:
            - List of dictionaries containing image policy parameters
        type: list
        elements: dict
        default: []
        suboptions:
            name:
                description:
                    - The image policy name.
                type: str
                required: true
            agnostic:
                description:
                    - The agnostic flag.
                type: bool
                default: false
                required: false
            description1:
                description:
                    - The image policy description.
                type: str
                default: ""
                required: false
            epld_image:
                description:
                    - The epld image name.
                type: str
                default: ""
                required: false
            packages:
                description:
                    - A dictionary containing two keys, install and uninstall.
                type: dict
                required: false
                suboptions:
                    install:
                        description:
                            - A list of packages to install.
                        type: list
                        elements: str
                        required: false
                    uninstall:
                        description:
                            - A list of packages to uninstall.
                        type: list
                        elements: str
                        required: false
            platform:
                description:
                    - The platform to which the image policy applies e.g. N9K.
                type: str
                required: true
            release:
                description:
                    - The release associated with the image policy.
                    - This is derived from the image name as follows.
                    - From image name nxos64-cs.10.2.5.M.bin
                    - we need to extract version (10.2.5), platform (nxos64-cs), and bits (64bit).
                    - The release string conforms to format (version)_(platform)_(bits)
                    - so the resulting release string will be 10.2.5_nxos64-cs_64bit
                type: str
                required: true
            type:
                description:
                    - The type of the image policy e.g. PLATFORM.
                type: str
                default: PLATFORM
                required: false
